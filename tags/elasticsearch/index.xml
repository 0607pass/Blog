<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Elasticsearch on XFFF çš„ç‹¬ç«‹åšå®¢</title><link>https://0607pass.github.io/Blog/tags/elasticsearch/</link><description>Recent content in Elasticsearch on XFFF çš„ç‹¬ç«‹åšå®¢</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Â© {year} XFFF</copyright><lastBuildDate>Sun, 04 Jan 2026 21:32:26 +0800</lastBuildDate><atom:link href="https://0607pass.github.io/Blog/tags/elasticsearch/index.xml" rel="self" type="application/rss+xml"/><item><title>å€’æ’ç´¢å¼•ä¸åˆ†è¯æœºåˆ¶</title><link>https://0607pass.github.io/Blog/p/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95%E4%B8%8E%E5%88%86%E8%AF%8D%E6%9C%BA%E5%88%B6/</link><pubDate>Sun, 04 Jan 2026 21:32:26 +0800</pubDate><guid>https://0607pass.github.io/Blog/p/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95%E4%B8%8E%E5%88%86%E8%AF%8D%E6%9C%BA%E5%88%B6/</guid><description>&lt;img src="https://0607pass.github.io/Blog/images/postCover/es.png" alt="Featured image of post å€’æ’ç´¢å¼•ä¸åˆ†è¯æœºåˆ¶" /&gt;&lt;hr&gt;
&lt;h1 id="elasticsearch-æ ¸å¿ƒåŸç†å€’æ’ç´¢å¼•ä¸åˆ†è¯æœºåˆ¶"&gt;Elasticsearch æ ¸å¿ƒåŸç†ï¼šå€’æ’ç´¢å¼•ä¸åˆ†è¯æœºåˆ¶
&lt;/h1&gt;&lt;p&gt;å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰æ˜¯ Elasticsearch å…¨æ–‡æœç´¢èƒ½åŠ›çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯æœç´¢å¼•æ“æ™®éé‡‡ç”¨çš„ä¸€ç§é«˜æ•ˆæ•°æ®ç»“æ„ã€‚é€šè¿‡å€’æ’ç´¢å¼•ï¼ŒElasticsearch å¯ä»¥å¿«é€Ÿå®šä½åŒ…å«æŸä¸ªå…³é”®è¯çš„æ–‡æ¡£ï¼Œæå¤§åœ°æå‡äº†æœç´¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id="1-ä»€ä¹ˆæ˜¯å€’æ’ç´¢å¼•"&gt;1. ä»€ä¹ˆæ˜¯å€’æ’ç´¢å¼•ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;æ˜¯ä»&lt;strong&gt;å…³é”®è¯åˆ°æ–‡æ¡£&lt;/strong&gt;çš„æ˜ å°„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­£æ’ç´¢å¼•ï¼ˆForward Indexï¼‰ï¼š&lt;/strong&gt; å­˜å‚¨çš„æ˜¯â€œæ–‡æ¡£ ID å†…å®¹â€ï¼Œç±»ä¼¼äºä¹¦çš„ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰ï¼š&lt;/strong&gt; å­˜å‚¨çš„æ˜¯â€œå…³é”®è¯ æ–‡æ¡£ ID åˆ—è¡¨â€ï¼Œç±»ä¼¼äºä¹¦æœ«å°¾çš„ç´¢å¼•å…³é”®è¯è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç®€å•ç¤ºä¾‹"&gt;ç®€å•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–‡æ¡£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ 1:&lt;/strong&gt; Elasticsearch æ˜¯åˆ†å¸ƒå¼å¼•æ“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ 2:&lt;/strong&gt; åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯æœç´¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ 3:&lt;/strong&gt; æœç´¢å¼•æ“çš„æœªæ¥æ˜¯æ™ºèƒ½åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿæˆçš„å€’æ’ç´¢å¼•å¦‚ä¸‹è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®è¯&lt;/th&gt;
&lt;th&gt;æ–‡æ¡£ ID åˆ—è¡¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;elasticsearch&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åˆ†å¸ƒå¼&lt;/td&gt;
&lt;td&gt;1, 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ ¸å¿ƒ&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æœç´¢&lt;/td&gt;
&lt;td&gt;2, 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼•æ“&lt;/td&gt;
&lt;td&gt;1, 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ™ºèƒ½åŒ–&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ•ˆæœï¼š&lt;/strong&gt; å½“ç”¨æˆ·æœç´¢â€œå¼•æ“â€æ—¶ï¼ŒElasticsearch æ— éœ€æ‰«ææ‰€æœ‰æ–‡æ¡£ï¼Œç›´æ¥é€šè¿‡ç´¢å¼•å³å¯é”å®šæ–‡æ¡£ 1 å’Œ 3ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id="2-å€’æ’ç´¢å¼•çš„æ„å»ºè¿‡ç¨‹"&gt;2. å€’æ’ç´¢å¼•çš„æ„å»ºè¿‡ç¨‹
&lt;/h2&gt;&lt;p&gt;Elasticsearch æ„å»ºå€’æ’ç´¢å¼•ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;h3 id="æ­¥éª¤ä¸€åˆ†è¯tokenization"&gt;æ­¥éª¤ä¸€ï¼šåˆ†è¯ï¼ˆTokenizationï¼‰
&lt;/h3&gt;&lt;p&gt;å°†æ–‡æœ¬å†…å®¹æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å•è¯æˆ–çŸ­è¯­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸè¯­å¥ï¼š&lt;/strong&gt; &lt;code&gt;Elasticsearch æ˜¯åˆ†å¸ƒå¼å¼•æ“&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†è¯ç»“æœï¼š&lt;/strong&gt; &lt;code&gt;[Elasticsearch, æ˜¯, åˆ†å¸ƒå¼, å¼•æ“]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ­¥éª¤äºŒå½’ä¸€åŒ–normalization"&gt;æ­¥éª¤äºŒï¼šå½’ä¸€åŒ–ï¼ˆNormalizationï¼‰
&lt;/h3&gt;&lt;p&gt;å¯¹åˆ†è¯ç»“æœè¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œæé«˜åŒ¹é…æˆåŠŸç‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¬å°å†™ï¼š&lt;/strong&gt; &lt;code&gt;Elasticsearch&lt;/code&gt; &lt;code&gt;elasticsearch&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»é™¤åœç”¨è¯ï¼š&lt;/strong&gt; åˆ é™¤ â€œçš„â€ã€â€œæ˜¯â€ ç­‰å¯¹æœç´¢è´¡çŒ®è¾ƒå°çš„è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯å¹²æå–ï¼š&lt;/strong&gt; å°†è¯æ±‡å½’ä¸ºåŸºæœ¬å½¢å¼ï¼ˆå¦‚ &lt;code&gt;running&lt;/code&gt; &lt;code&gt;run&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ­¥éª¤ä¸‰åˆ›å»ºå¹¶å­˜å‚¨ç´¢å¼•"&gt;æ­¥éª¤ä¸‰ï¼šåˆ›å»ºå¹¶å­˜å‚¨ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;æ ¹æ®å¤„ç†åçš„è¯é¡¹å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæœ€ç»ˆå½¢æˆå¯ä¾›æŸ¥è¯¢çš„ç»“æ„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;elasticsearch&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;åˆ†å¸ƒå¼&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;å¼•æ“&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;æœç´¢&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="3-ç”¨æˆ·å‘èµ·æœç´¢çš„è¿‡ç¨‹"&gt;3. ç”¨æˆ·å‘èµ·æœç´¢çš„è¿‡ç¨‹
&lt;/h2&gt;&lt;p&gt;å½“ç”¨æˆ·æ‰§è¡ŒæŸ¥è¯¢ï¼ˆå¦‚æœç´¢â€œåˆ†å¸ƒå¼æœç´¢â€ï¼‰æ—¶ï¼Œç³»ç»Ÿéµå¾ªä»¥ä¸‹é€»è¾‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£ææŸ¥è¯¢æ¡ä»¶ï¼š&lt;/strong&gt; å°†æœç´¢è¯è§£æä¸ºåˆ†è¯ç»“æœ &lt;code&gt;[åˆ†å¸ƒå¼, æœç´¢]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥æ‰¾å€’æ’ç´¢å¼•ï¼š&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;åˆ†å¸ƒå¼&lt;/code&gt; &lt;code&gt;[1, 2]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;æœç´¢&lt;/code&gt; &lt;code&gt;[2, 3]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶ç»“æœï¼š&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AND æŸ¥è¯¢ï¼ˆäº¤é›†ï¼‰ï¼š&lt;/strong&gt; è¿”å› &lt;code&gt;[2]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OR æŸ¥è¯¢ï¼ˆå¹¶é›†ï¼‰ï¼š&lt;/strong&gt; è¿”å› &lt;code&gt;[1, 2, 3]&lt;/code&gt;ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="4"&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å…³æ€§æ’åºï¼š&lt;/strong&gt; æ ¹æ®ç›¸å…³æ€§è¯„åˆ†ï¼ˆå¦‚ TF-IDF æˆ– BM25ï¼‰å¯¹ç»“æœæ’åºå¹¶è¿”å›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="4-elasticsearch-åˆ†è¯å™¨analyzer"&gt;4. Elasticsearch åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰
&lt;/h2&gt;&lt;p&gt;åˆ†è¯å™¨æ˜¯å¤„ç†æ–‡æœ¬çš„æ ¸å¿ƒç»„ä»¶ï¼Œå†³å®šäº†æ•°æ®å¦‚ä½•è¢«â€œåˆ‡åˆ†â€å’Œâ€œæ¸…æ´—â€ã€‚&lt;/p&gt;
&lt;h3 id="åˆ†è¯å™¨çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†"&gt;åˆ†è¯å™¨çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦è¿‡æ»¤ï¼ˆCharacter Filtersï¼‰ï¼š&lt;/strong&gt; é¢„å¤„ç†ï¼Œå¦‚å»é™¤ HTML æ ‡ç­¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†è¯ï¼ˆTokenizerï¼‰ï¼š&lt;/strong&gt; æ ¸å¿ƒåˆ‡åˆ†é€»è¾‘ï¼ŒæŒ‰ç©ºæ ¼æˆ–ç¬¦å·æ‹†åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯é¡¹è¿‡æ»¤ï¼ˆToken Filtersï¼‰ï¼š&lt;/strong&gt; åå¤„ç†ï¼Œå¦‚è½¬å°å†™ã€å»åœç”¨è¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="å¸¸è§å†…ç½®åˆ†è¯å™¨å¯¹æ¯”"&gt;å¸¸è§å†…ç½®åˆ†è¯å™¨å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†è¯å™¨ç±»å‹&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹è¾“å…¥&lt;/th&gt;
&lt;th&gt;åˆ†è¯ç»“æœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Standard&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤åˆ†è¯å™¨ï¼ŒæŒ‰æ ‡å‡†è¯­æ³•åˆ‡åˆ†å¹¶è½¬å°å†™&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Elasticsearch is powerful.&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[&amp;quot;elasticsearch&amp;quot;, &amp;quot;is&amp;quot;, &amp;quot;powerful&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Simple&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…æŒ‰éå­—æ¯å­—ç¬¦åˆ‡åˆ†ï¼Œè¿‡æ»¤æ•°å­—å’Œç¬¦å·&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Text123 data!&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[&amp;quot;text&amp;quot;, &amp;quot;data&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Whitespace&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…ä»¥ç©ºæ ¼åˆ†è¯ï¼Œä¸å¤„ç†å¤§å°å†™&lt;/td&gt;
&lt;td&gt;&lt;code&gt;The quick&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[&amp;quot;The&amp;quot;, &amp;quot;quick&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Keyword&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åˆ†è¯ï¼Œå°†æ•´æ¡è¾“å…¥ä½œä¸ºä¸€ä¸ªè¯é¡¹&lt;/td&gt;
&lt;td&gt;&lt;code&gt;user_id:123&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[&amp;quot;user_id:123&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Stop&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ Standard åŸºç¡€ä¸Šç§»é™¤åœç”¨è¯&lt;/td&gt;
&lt;td&gt;&lt;code&gt;The quick&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[&amp;quot;quick&amp;quot;]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="éªŒè¯åˆ†è¯æ•ˆæœ"&gt;éªŒè¯åˆ†è¯æ•ˆæœ
&lt;/h3&gt;&lt;p&gt;åœ¨ Elasticsearch Dev Tools ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;_analyze&lt;/code&gt; API è¿›è¡Œæµ‹è¯•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;POST /_analyze
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;analyzer&amp;#34;: &amp;#34;standard&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;text&amp;#34;: &amp;#34;Elasticsearch is powerful.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä»½å…³äº &lt;strong&gt;IK ä¸­æ–‡åˆ†è¯å™¨&lt;/strong&gt; çš„è¯¦ç»†æ•™ç¨‹å·²æ•´ç†ä¸º Markdown æ ¼å¼ã€‚æˆ‘å·²æŒ‰ç…§æ‚¨çš„è¦æ±‚ï¼Œå°†ç¤ºä¾‹å†…å®¹æ›¿æ¢ä¸ºæ›´å…·é€šç”¨æ€§çš„æŠ€æœ¯æ–‡æœ¬ï¼ˆå»é™¤äº†åŸæœ‰çš„ç‰¹å®šåç§°ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="elasticsearch-ik-ä¸­æ–‡åˆ†è¯å™¨è¯¦è§£"&gt;Elasticsearch ï¼šIK ä¸­æ–‡åˆ†è¯å™¨è¯¦è§£
&lt;/h1&gt;&lt;p&gt;åœ¨å¤„ç†è‹±æ–‡æ–‡æœ¬æ—¶ï¼Œç”±äºè¯ä¸è¯ä¹‹é—´æœ‰ç©ºæ ¼ï¼ŒæŒ‰ç©ºæ ¼åˆ†è¯éå¸¸æ–¹ä¾¿ã€‚ä½†ä¸­æ–‡å¥å­æ˜¯è¿ç»­çš„ï¼Œé»˜è®¤çš„ &lt;code&gt;standard&lt;/code&gt; åˆ†è¯å™¨åªèƒ½ç®€å•åœ°â€œä¸€å­—ä¸€åˆ†â€ï¼Œæ— æ³•è¯†åˆ«ä¸­æ–‡è¯æ±‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IK åˆ†è¯å™¨ï¼ˆIK Analyzerï¼‰&lt;/strong&gt; æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºä¸­æ–‡è®¾è®¡çš„åˆ†è¯æ’ä»¶ï¼Œæ”¯æŒç»†ç²’åº¦åˆ†è¯å’Œæ™ºèƒ½åˆ†è¯ï¼Œæ˜¯ç›®å‰ Elasticsearch ä¸­æ–‡æœç´¢åœºæ™¯ä¸‹çš„é¦–é€‰æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="1-ä»€ä¹ˆæ˜¯-ik-ä¸­æ–‡åˆ†è¯å™¨"&gt;1. ä»€ä¹ˆæ˜¯ IK ä¸­æ–‡åˆ†è¯å™¨ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;IK åˆ†è¯å™¨æ˜¯åŸºäº Apache Lucene çš„ä¸­æ–‡åˆ†è¯æ’ä»¶ï¼Œä¸“ä¸º Elasticsearch æä¾›æ”¯æŒã€‚å®ƒèƒ½æ ¹æ®å†…ç½®è¯å…¸å’Œè¯­ä¹‰è§„åˆ™ï¼Œå°†ä¸­æ–‡å¥å­æ‹†åˆ†ä¸ºå…·å¤‡å®é™…æ„ä¹‰çš„è¯æ¡ã€‚&lt;/p&gt;
&lt;h3 id="ä¸»è¦ç‰¹ç‚¹"&gt;ä¸»è¦ç‰¹ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸¤ç§æ¨¡å¼ï¼š&lt;/strong&gt; æ”¯æŒç»†ç²’åº¦åˆ†è¯ï¼ˆ&lt;code&gt;ik_max_word&lt;/code&gt;ï¼‰å’Œæ™ºèƒ½åˆ†è¯ï¼ˆ&lt;code&gt;ik_smart&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§ï¼š&lt;/strong&gt; æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•è¯å…¸ï¼Œæ·»åŠ è¡Œä¸šæœ¯è¯­æˆ–ç½‘ç»œæµè¡Œè¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è°ƒæ•´ï¼š&lt;/strong&gt; æ”¯æŒçƒ­æ›´æ–°è¯å…¸ï¼Œæ— éœ€é‡å¯æœåŠ¡å³å¯æ›´æ–°åˆ†è¯è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-å®‰è£…-ik-æ’ä»¶docker-ç¯å¢ƒ"&gt;2. å®‰è£… IK æ’ä»¶ï¼ˆDocker ç¯å¢ƒï¼‰
&lt;/h2&gt;&lt;h3 id="ç¬¬ä¸€æ­¥è¿›å…¥å®¹å™¨å†…éƒ¨"&gt;ç¬¬ä¸€æ­¥ï¼šè¿›å…¥å®¹å™¨å†…éƒ¨
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker &lt;span class="nb"&gt;exec&lt;/span&gt; -it es7 /bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿›å…¥åé€šè¿‡ &lt;code&gt;ls&lt;/code&gt; å‘½ä»¤å¯ä»¥ç¡®è®¤å½“å‰å¤„äº Elasticsearch çš„æ ¹ç›®å½•ã€‚&lt;/p&gt;
&lt;h3 id="ç¬¬äºŒæ­¥æ‰§è¡Œå®‰è£…å‘½ä»¤"&gt;ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œå®‰è£…å‘½ä»¤
&lt;/h3&gt;&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶å®‰è£… IK æ’ä»¶ï¼ˆè¯·æ ¹æ®æ‚¨çš„ ES ç‰ˆæœ¬è°ƒæ•´ç‰ˆæœ¬å·ï¼‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;bin/elasticsearch-plugin install https://get.infini.cloud/elasticsearch/analysis-ik/7.3.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®‰è£…è¿‡ç¨‹ä¸­æç¤ºç¡®è®¤æ—¶ï¼Œè¾“å…¥ &lt;code&gt;y&lt;/code&gt; å¹¶å›è½¦ã€‚&lt;/p&gt;
&lt;h3 id="ç¬¬ä¸‰æ­¥å¤‡ä»½æ’ä»¶æ–‡ä»¶å¯é€‰ä½†æ¨è"&gt;ç¬¬ä¸‰æ­¥ï¼šå¤‡ä»½æ’ä»¶æ–‡ä»¶ï¼ˆå¯é€‰ä½†æ¨èï¼‰
&lt;/h3&gt;&lt;p&gt;é€€å‡ºå®¹å™¨åï¼Œå°†æ’ä»¶åŠé…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºï¼Œé˜²æ­¢å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# å¤åˆ¶åˆ°å®¿ä¸»æœºå¯¹åº”ç›®å½•ï¼ˆç¤ºä¾‹è·¯å¾„ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker cp es7:/usr/share/elasticsearch/plugins/analysis-ik /your/path/plugins
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker cp es7:/usr/share/elasticsearch/config/analysis-ik /your/path/config
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ç¬¬å››æ­¥é‡å¯æœåŠ¡"&gt;ç¬¬å››æ­¥ï¼šé‡å¯æœåŠ¡
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker restart es7
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;éªŒè¯ï¼š&lt;/strong&gt; æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼Œè‹¥çœ‹åˆ° &lt;code&gt;loaded plugin [analysis-ik]&lt;/code&gt; å­—æ ·ï¼Œè¯´æ˜åŠ è½½æˆåŠŸã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="3-ik-åˆ†è¯æ¨¡å¼å¯¹æ¯”"&gt;3. IK åˆ†è¯æ¨¡å¼å¯¹æ¯”
&lt;/h2&gt;&lt;p&gt;IK åˆ†è¯å™¨æä¾›äº†ä¸¤ç§æ ¸å¿ƒåˆ†è¯æ¨¡å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¨¡å¼&lt;/th&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;åˆ†è¯ç­–ç•¥&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ik_smart&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ™ºèƒ½åˆ†è¯&lt;/td&gt;
&lt;td&gt;ç²—ç²’åº¦åˆ‡åˆ†ï¼Œè¿½æ±‚è¯­ä¹‰å®Œæ•´æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœç´¢æŸ¥è¯¢æ—¶&lt;/strong&gt;ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ik_max_word&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»†ç²’åº¦åˆ†è¯&lt;/td&gt;
&lt;td&gt;ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œè¯é‡å¤§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å»ºç«‹ç´¢å¼•æ—¶&lt;/strong&gt;ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="4-æ•ˆæœæ¼”ç¤º"&gt;4. æ•ˆæœæ¼”ç¤º
&lt;/h2&gt;&lt;h3 id="åœºæ™¯ä¸€æ™ºèƒ½åˆ†è¯ik_smart"&gt;åœºæ™¯ä¸€ï¼šæ™ºèƒ½åˆ†è¯ï¼ˆik_smartï¼‰
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å°†æµ‹è¯•ä¸€æ®µæŠ€æœ¯æè¿°æ–‡å­—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ±‚ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;POST /_analyze
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;analyzer&amp;#34;: &amp;#34;ik_smart&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;text&amp;#34;: &amp;#34;åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„å¦‚ä½•è®¾è®¡ï¼Ÿ&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸåˆ†è¯ç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;åˆ†å¸ƒå¼&lt;/code&gt; / &lt;code&gt;ç³»ç»Ÿ&lt;/code&gt; / &lt;code&gt;æ¶æ„&lt;/code&gt; / &lt;code&gt;å¦‚ä½•&lt;/code&gt; / &lt;code&gt;è®¾è®¡&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="åœºæ™¯äºŒé»˜è®¤åˆ†è¯å™¨å¯¹æ¯”standard"&gt;åœºæ™¯äºŒï¼šé»˜è®¤åˆ†è¯å™¨å¯¹æ¯”ï¼ˆstandardï¼‰
&lt;/h3&gt;&lt;p&gt;å¯¹æ¯” ES é»˜è®¤åˆ†è¯å™¨å¯¹ä¸­æ–‡çš„å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ±‚ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;POST /_analyze
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;analyzer&amp;#34;: &amp;#34;standard&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;text&amp;#34;: &amp;#34;åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„å¦‚ä½•è®¾è®¡ï¼Ÿ&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸåˆ†è¯ç»“æœï¼ˆé€å­—æ‹†åˆ†ï¼‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;åˆ†&lt;/code&gt; / &lt;code&gt;å¸ƒ&lt;/code&gt; / &lt;code&gt;å¼&lt;/code&gt; / &lt;code&gt;ç³»&lt;/code&gt; / &lt;code&gt;ç»Ÿ&lt;/code&gt; / &lt;code&gt;æ¶&lt;/code&gt; / &lt;code&gt;æ„&lt;/code&gt; / &lt;code&gt;å¦‚&lt;/code&gt; / &lt;code&gt;ä½•&lt;/code&gt; / &lt;code&gt;è®¾&lt;/code&gt; / &lt;code&gt;è®¡&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="åœºæ™¯ä¸‰ç»†ç²’åº¦åˆ†è¯ik_max_word"&gt;åœºæ™¯ä¸‰ï¼šç»†ç²’åº¦åˆ†è¯ï¼ˆik_max_wordï¼‰
&lt;/h3&gt;&lt;p&gt;å¯¹äºå¤æ‚çš„ä¸“æœ‰åè¯ï¼Œ&lt;code&gt;ik_max_word&lt;/code&gt; ä¼šè¿›è¡Œç©·ä¸¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ±‚ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;POST /_analyze
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;analyzer&amp;#34;: &amp;#34;ik_max_word&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;text&amp;#34;: &amp;#34;åŒ—äº¬äº’è”ç½‘ç§‘æŠ€å…¬å¸&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸåˆ†è¯ç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;åŒ—äº¬&lt;/code&gt; / &lt;code&gt;äº’è”ç½‘&lt;/code&gt; / &lt;code&gt;äº’è”&lt;/code&gt; / &lt;code&gt;ç½‘&lt;/code&gt; / &lt;code&gt;ç§‘æŠ€å…¬å¸&lt;/code&gt; / &lt;code&gt;ç§‘æŠ€&lt;/code&gt; / &lt;code&gt;å…¬å¸&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;IK åˆ†è¯å™¨é€šè¿‡ &lt;code&gt;ik_smart&lt;/code&gt; ä¿è¯äº†æœç´¢çš„&lt;strong&gt;å‡†ç¡®æ€§&lt;/strong&gt;ï¼Œé€šè¿‡ &lt;code&gt;ik_max_word&lt;/code&gt; ä¿è¯äº†ç´¢å¼•çš„&lt;strong&gt;è¦†ç›–é¢&lt;/strong&gt;ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œé€šå¸¸é‡‡å–â€œç´¢å¼•æ—¶ç»†ç²’åº¦ï¼Œæœç´¢æ—¶æ™ºèƒ½åŒ–â€çš„ç­–ç•¥ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„æœç´¢ä½“éªŒã€‚&lt;/p&gt;
&lt;hr&gt;</description></item><item><title>Elasticsearch æ•°æ®ç±»å‹</title><link>https://0607pass.github.io/Blog/p/elasticsearch-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</link><pubDate>Sun, 04 Jan 2026 21:17:02 +0800</pubDate><guid>https://0607pass.github.io/Blog/p/elasticsearch-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</guid><description>&lt;img src="https://0607pass.github.io/Blog/images/postCover/es.png" alt="Featured image of post Elasticsearch æ•°æ®ç±»å‹" /&gt;&lt;h2 id="elasticsearch-æ•°æ®ç±»å‹"&gt;&lt;strong&gt;Elasticsearch æ•°æ®ç±»å‹&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;åœ¨ Elasticsearch ä¸­ï¼Œæ•°æ®ç±»å‹ å†³å®šäº†å­—æ®µçš„å­˜å‚¨å’Œç´¢å¼•æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬æ”¯æŒçš„æŸ¥è¯¢ç±»å‹å’Œæ“ä½œæ–¹å¼ã€‚æ­£ç¡®ç†è§£å’Œé€‰æ‹©æ•°æ®ç±»å‹ï¼Œæ˜¯è®¾è®¡é«˜æ•ˆç´¢å¼•å’Œæœç´¢çš„é‡è¦å‰æã€‚&lt;/p&gt;
&lt;h3 id="æ•°æ®ç±»å‹åˆ†ç±»"&gt;æ•°æ®ç±»å‹åˆ†ç±»
&lt;/h3&gt;&lt;p&gt;Elasticsearch çš„å­—æ®µæ•°æ®ç±»å‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;å¤æ‚æ•°æ®ç±»å‹ï¼šå¦‚å¯¹è±¡ã€åµŒå¥—å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ°ç†æ•°æ®ç±»å‹ï¼šç”¨äºå­˜å‚¨å’Œæœç´¢åœ°ç†ä½ç½®ç›¸å…³çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹æ®Šæ•°æ®ç±»å‹ï¼šä¸“é—¨ä¸ºç‰¹å®šåœºæ™¯è®¾è®¡çš„æ•°æ®ç±»å‹ï¼Œå¦‚ IP åœ°å€ã€èŒƒå›´ç±»å‹ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä»½å…³äº Elasticsearch æ•°æ®ç±»å‹çš„æ•´ç†å·²ç»æŒ‰ç…§ Markdown æ ¼å¼è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†æ¸…æ™°çš„å±‚çº§ç»“æ„ã€ä»£ç å—æ ‡æ³¨ä»¥åŠå¯¹æ¯”è¯´æ˜ï¼Œæ–¹ä¾¿ä½ ç›´æ¥é˜…è¯»æˆ–å­˜æ¡£ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="1-åŸºæœ¬æ•°æ®ç±»å‹"&gt;1. åŸºæœ¬æ•°æ®ç±»å‹
&lt;/h2&gt;&lt;h3 id="æ–‡æœ¬ç±»å‹"&gt;æ–‡æœ¬ç±»å‹
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;text&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºå…¨æ–‡æœç´¢ã€‚æ”¯æŒåˆ†è¯ï¼ˆAnalysisï¼‰å¹¶å»ºç«‹å€’æ’ç´¢å¼•ã€‚&lt;/td&gt;
&lt;td&gt;é‚®ä»¶æ­£æ–‡ã€ç¬”è®°æ ‡é¢˜ã€äº§å“æè¿°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;keyword&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç²¾ç¡®åŒ¹é…ã€‚ä¸å‚ä¸åˆ†è¯ï¼Œç›´æ¥å»ºç«‹ç´¢å¼•ã€‚&lt;/td&gt;
&lt;td&gt;çŠ¶æ€ç ï¼ˆOK/Failï¼‰ã€åˆ†ç±»æ ‡ç­¾ã€é‚®ç¼–ã€IDã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹å®šä¹‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;mappings&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;title&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;text&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;status&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;keyword&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="æ•°å€¼ç±»å‹"&gt;æ•°å€¼ç±»å‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•´å‹&lt;/strong&gt;ï¼š&lt;code&gt;integer&lt;/code&gt; (32ä½), &lt;code&gt;long&lt;/code&gt; (64ä½), &lt;code&gt;short&lt;/code&gt; (16ä½), &lt;code&gt;byte&lt;/code&gt; (8ä½)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ®ç‚¹å‹&lt;/strong&gt;ï¼š&lt;code&gt;double&lt;/code&gt; (åŒç²¾åº¦), &lt;code&gt;float&lt;/code&gt; (å•ç²¾åº¦), &lt;code&gt;half_float&lt;/code&gt;, &lt;code&gt;scaled_float&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹å®šä¹‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;age&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;integer&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;price&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;double&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="å¸ƒå°”ä¸æ—¥æœŸ"&gt;å¸ƒå°”ä¸æ—¥æœŸ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;boolean&lt;/code&gt;&lt;/strong&gt;ï¼šå­˜å‚¨ &lt;code&gt;true&lt;/code&gt; æˆ– &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;date&lt;/code&gt;&lt;/strong&gt;ï¼šå­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ã€‚é»˜è®¤æ”¯æŒ ISO 8601 æ ¼å¼ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ ¼å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹å®šä¹‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;created_at&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;date&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;yyyy-MM-dd HH:mm:ss||epoch_millis&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="2-å¤æ‚æ•°æ®ç±»å‹"&gt;2. å¤æ‚æ•°æ®ç±»å‹
&lt;/h2&gt;&lt;h3 id="å¯¹è±¡ç±»å‹-object"&gt;å¯¹è±¡ç±»å‹ (&lt;code&gt;object&lt;/code&gt;)
&lt;/h3&gt;&lt;p&gt;ç”¨äºå­˜å‚¨å•ä¸ª JSON å¯¹è±¡ã€‚åœ¨ ES å†…éƒ¨ä¼šè¢«æ‰å¹³åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;text&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;age&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;integer&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="åµŒå¥—ç±»å‹-nested"&gt;åµŒå¥—ç±»å‹ (&lt;code&gt;nested&lt;/code&gt;)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é‡è¦&lt;/strong&gt;ï¼šå¦‚æœéœ€è¦å­˜å‚¨â€œå¯¹è±¡æ•°ç»„â€å¹¶ä¿æŒå¯¹è±¡å†…å­—æ®µçš„å…³è”æ€§ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;nested&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;comments&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;nested&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;properties&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;author&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;keyword&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;text&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="3-åœ°ç†æ•°æ®ç±»å‹"&gt;3. åœ°ç†æ•°æ®ç±»å‹
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;geo_point&lt;/code&gt;&lt;/strong&gt;ï¼šå­˜å‚¨ç»çº¬åº¦åæ ‡å¯¹ã€‚æ”¯æŒè·ç¦»æ’åºã€åœ°ç†å›´æ æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;ç¤ºä¾‹æ•°æ®&lt;/em&gt;ï¼š&lt;code&gt;&amp;quot;location&amp;quot;: { &amp;quot;lat&amp;quot;: 40.71, &amp;quot;lon&amp;quot;: -74.00 }&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;geo_shape&lt;/code&gt;&lt;/strong&gt;ï¼šå­˜å‚¨å¤æ‚çš„å‡ ä½•å›¾å½¢ï¼ˆå¦‚å¤šè¾¹å½¢ &lt;code&gt;Polygon&lt;/code&gt;ã€çº¿æ¡ &lt;code&gt;LineString&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;ç¤ºä¾‹åœºæ™¯&lt;/em&gt;ï¼šè¡Œæ”¿åŒºåˆ’è¾¹ç•Œã€èˆªçº¿è½¨è¿¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="4-ç‰¹æ®Šæ•°æ®ç±»å‹"&gt;4. ç‰¹æ®Šæ•°æ®ç±»å‹
&lt;/h2&gt;&lt;h3 id="ip-åœ°å€-ip"&gt;IP åœ°å€ (&lt;code&gt;ip&lt;/code&gt;)
&lt;/h3&gt;&lt;p&gt;æ”¯æŒ IPv4 å’Œ IPv6ï¼Œå…è®¸é’ˆå¯¹ IP æ®µè¿›è¡Œæœç´¢ï¼ˆCIDR æ£€ç´¢ï¼‰ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;client_ip&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="èŒƒå›´ç±»å‹-range"&gt;èŒƒå›´ç±»å‹ (&lt;code&gt;range&lt;/code&gt;)
&lt;/h3&gt;&lt;p&gt;å­˜å‚¨ä¸€ä¸ªåŒºé—´å€¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­ç±»å‹&lt;/strong&gt;ï¼š&lt;code&gt;integer_range&lt;/code&gt;, &lt;code&gt;float_range&lt;/code&gt;, &lt;code&gt;long_range&lt;/code&gt;, &lt;code&gt;date_range&lt;/code&gt;, &lt;code&gt;ip_range&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s2"&gt;&amp;#34;price_range&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;gte&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;lte&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="æ€»ç»“ä¸å»ºè®®"&gt;æ€»ç»“ä¸å»ºè®®
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;éœ€æ±‚&lt;/th&gt;
&lt;th&gt;æ¨èç±»å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;éœ€è¦åˆ†è¯æœç´¢&lt;/td&gt;
&lt;td&gt;&lt;code&gt;text&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;éœ€è¦èšåˆï¼ˆAggregationï¼‰æˆ–æ’åº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;keyword&lt;/code&gt; æˆ–æ•°å€¼ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­˜å‚¨ JSON å¯¹è±¡ä¸”éœ€è¦ç‹¬ç«‹æŸ¥è¯¢æ•°ç»„æˆå‘˜&lt;/td&gt;
&lt;td&gt;&lt;code&gt;nested&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å­˜å‚¨ç»çº¬åº¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;geo_point&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¤šå­—æ®µé…ç½®&lt;/strong&gt;ï¼šåŒä¸€ä¸ªå­—æ®µå¯ä»¥æ—¢æ˜¯ &lt;code&gt;text&lt;/code&gt;ï¼ˆç”¨äºæœç´¢ï¼‰åˆæ˜¯ &lt;code&gt;keyword&lt;/code&gt;ï¼ˆç”¨äºèšåˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®å®šä¹‰&lt;/strong&gt;ï¼šå°½é‡é¿å…ä¾é  ES çš„åŠ¨æ€æ˜ å°„ï¼ˆDynamic Mappingï¼‰ï¼Œæ‰‹åŠ¨å®šä¹‰ Mapping èƒ½æ›´å¥½åœ°æ§åˆ¶å­˜å‚¨ç©ºé—´å’Œç´¢å¼•æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;</description></item><item><title>Elasticsearch æ ¸å¿ƒæ¦‚å¿µ</title><link>https://0607pass.github.io/Blog/p/elasticsearch-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/</link><pubDate>Sat, 03 Jan 2026 22:11:02 +0800</pubDate><guid>https://0607pass.github.io/Blog/p/elasticsearch-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5/</guid><description>&lt;img src="https://0607pass.github.io/Blog/images/postCover/es.png" alt="Featured image of post Elasticsearch æ ¸å¿ƒæ¦‚å¿µ" /&gt;&lt;hr&gt;
&lt;h1 id="-elasticsearch-æ ¸å¿ƒçŸ¥è¯†æ‰‹å†Œ"&gt;ğŸš€ Elasticsearch æ ¸å¿ƒçŸ¥è¯†æ‰‹å†Œ
&lt;/h1&gt;&lt;h2 id="1-ä»€ä¹ˆæ˜¯-elasticsearch"&gt;1. ä»€ä¹ˆæ˜¯ Elasticsearchï¼Ÿ
&lt;/h2&gt;&lt;p&gt;Elasticsearch æ˜¯ä¸€ä¸ªåŸºäº &lt;strong&gt;Apache Lucene&lt;/strong&gt; æ„å»ºçš„å¼€æºã€åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å®ƒèƒ½å¤Ÿå¯¹æµ·é‡æ•°æ®è¿›è¡Œè¿‘å®æ—¶çš„å­˜å‚¨ã€æœç´¢å’Œåˆ†æã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒç‰¹æ€§"&gt;æ ¸å¿ƒç‰¹æ€§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ¶æ„&lt;/strong&gt;ï¼šå¤©ç”Ÿæ”¯æŒé›†ç¾¤æ¨¡å¼ï¼Œå¯æ°´å¹³æ‰©å±•è‡³æ•°ç™¾ä¸ªèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æœç´¢&lt;/strong&gt;ï¼šæ•°æ®ä»å†™å…¥åˆ°å¯è¢«æœç´¢ä»…éœ€ç§’çº§å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨æ–‡æ£€ç´¢&lt;/strong&gt;ï¼šæ”¯æŒå¤æ‚çš„æ¨¡ç³ŠåŒ¹é…ã€åˆ†è¯ã€é«˜äº®æ˜¾ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RESTful API&lt;/strong&gt;ï¼šé€šè¿‡æ ‡å‡†çš„ HTTP æ¥å£å³å¯å®Œæˆæ‰€æœ‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜åº¦å¯å®šåˆ¶&lt;/strong&gt;ï¼šçµæ´»çš„åˆ†è¯å™¨ã€æŸ¥è¯¢è¯­æ³•ï¼Œé€‚åº”å¤šå˜ä¸šåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”"&gt;2. æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å°† Elasticsearch çš„æ¦‚å¿µä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰è¿›è¡Œç±»æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Elasticsearch&lt;/th&gt;
&lt;th&gt;å…³ç³»å‹æ•°æ®åº“ (RDBMS)&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Index (ç´¢å¼•)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Table (è¡¨)&lt;/td&gt;
&lt;td&gt;æ•°æ®çš„é€»è¾‘å®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Document (æ–‡æ¡£)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Row (è¡Œ)&lt;/td&gt;
&lt;td&gt;æœ€å°çš„æ•°æ®å•ä½ï¼ˆJSON æ ¼å¼ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Field (å­—æ®µ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Column (åˆ—)&lt;/td&gt;
&lt;td&gt;æ–‡æ¡£çš„å±æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Mapping (æ˜ å°„)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Schema (è¡¨ç»“æ„)&lt;/td&gt;
&lt;td&gt;å®šä¹‰å­—æ®µç±»å‹åŠå…¶è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DSL (æŸ¥è¯¢è¯­è¨€)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;SQL&lt;/td&gt;
&lt;td&gt;æœç´¢æ•°æ®çš„ä¸“ç”¨è¯­è¨€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="æ‰©å±•æ¦‚å¿µ"&gt;æ‰©å±•æ¦‚å¿µï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Clusterï¼ˆé›†ç¾¤ï¼‰&lt;/strong&gt;ï¼šç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œå…±åŒæ‰¿æ‹…å‹åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nodeï¼ˆèŠ‚ç‚¹ï¼‰&lt;/strong&gt;ï¼šé›†ç¾¤ä¸­çš„å•ä¸ªè¿è¡Œå®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shardï¼ˆåˆ†ç‰‡ï¼‰&lt;/strong&gt;ï¼šå°†ç´¢å¼•æ°´å¹³åˆ‡åˆ†ï¼Œåˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹ä»¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Replicaï¼ˆå‰¯æœ¬ï¼‰&lt;/strong&gt;ï¼šåˆ†ç‰‡çš„æ‹·è´ï¼Œæä¾›å†—ä½™å¤‡ä»½å¹¶æå‡æŸ¥è¯¢ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="3-å¿«é€Ÿéƒ¨ç½²-docker"&gt;3. å¿«é€Ÿéƒ¨ç½² (Docker)
&lt;/h2&gt;&lt;h3 id="å¯åŠ¨-elasticsearch"&gt;å¯åŠ¨ Elasticsearch
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker run -d &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; --name es7 &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -p 9200:9200 -p 9300:9300 &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;#34;discovery.type=single-node&amp;#34;&lt;/span&gt; &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -e &lt;span class="nv"&gt;ES_JAVA_OPTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;-Xms1024m -Xmx1024m&amp;#34;&lt;/span&gt; &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -v /home/xfff/docker/elasticsearch/config:/usr/share/elasticsearch/config &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -v /home/xfff/docker/elasticsearch/data:/usr/share/elasticsearch/data &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -v /home/xfff/docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; -v /home/xfff/docker/elasticsearch/logs:/usr/share/elasticsearch/logs &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; elasticsearch:7.3.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="å¯åŠ¨-kibana-å¯è§†åŒ–å·¥å…·"&gt;å¯åŠ¨ Kibana å¯è§†åŒ–å·¥å…·
&lt;/h3&gt;&lt;p&gt;Kibana ç”¨äºæ•°æ®æ¢ç´¢å’Œ Dev Tools è°ƒè¯•ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨å®¹å™¨&lt;/strong&gt;ï¼š&lt;code&gt;docker run -d --name kibana -p 5601:5601 kibana:7.3.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼šä¿®æ”¹ &lt;code&gt;kibana.yml&lt;/code&gt; é…ç½®æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;server.name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;kibana&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;server.host&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;0.0.0.0&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;elasticsearch.hosts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;http://&amp;lt;å®¿ä¸»æœºIP&amp;gt;:9200&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;i18n.locale&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;zh-CN&amp;#34;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# è®¾ç½®ä¸­æ–‡ç•Œé¢&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®&lt;/strong&gt;ï¼š&lt;code&gt;http://æœåŠ¡å™¨IP:5601&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="4-åŸºç¡€è¯­æ³•æ“ä½œ-dev-tools"&gt;4. åŸºç¡€è¯­æ³•æ“ä½œ (Dev Tools)
&lt;/h2&gt;&lt;h3 id="41-ç´¢å¼•ç®¡ç†"&gt;4.1 ç´¢å¼•ç®¡ç†
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºç´¢å¼•ï¼ˆæŒ‡å®šåˆ†ç‰‡ä¸å‰¯æœ¬ï¼‰&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;PUT /note
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;settings&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;number_of_shards&amp;#34;: 2,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;number_of_replicas&amp;#34;: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»“æ„åŒ–åˆ›å»ºï¼ˆæŒ‡å®š Mappingï¼‰&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;PUT /note
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;mappings&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;properties&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;title&amp;#34;: {&amp;#34;type&amp;#34;: &amp;#34;text&amp;#34;},
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;create_time&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;type&amp;#34;: &amp;#34;date&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;format&amp;#34;: &amp;#34;yyyy-MM-dd HH:mm:ss&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="42-æ–‡æ¡£-crud"&gt;4.2 æ–‡æ¡£ CRUD
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ /å…¨é‡æ›´æ–°&lt;/strong&gt;ï¼š&lt;code&gt;PUT /note/_doc/1 { &amp;quot;title&amp;quot;: &amp;quot;å†…å®¹&amp;quot; }&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å®šå­—æ®µæ›´æ–°&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;POST /note/_update/1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{ &amp;#34;doc&amp;#34;: { &amp;#34;title&amp;#34;: &amp;#34;æ–°æ ‡é¢˜&amp;#34; } }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºåˆ¶åˆ›å»ºï¼ˆå·²å­˜åœ¨åˆ™æŠ¥é”™ï¼‰&lt;/strong&gt;ï¼š&lt;code&gt;PUT /note/_create/1 { ... }&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤&lt;/strong&gt;ï¼š&lt;code&gt;DELETE /note/_doc/1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="5-é«˜çº§æœç´¢ä¸è¿‡æ»¤"&gt;5. é«˜çº§æœç´¢ä¸è¿‡æ»¤
&lt;/h2&gt;&lt;h3 id="51-åˆ†é¡µä¸æ’åº"&gt;5.1 åˆ†é¡µä¸æ’åº
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;GET /note/_search
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;query&amp;#34;: { &amp;#34;match_all&amp;#34;: {} },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;from&amp;#34;: 0,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;size&amp;#34;: 10,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;sort&amp;#34;: [ { &amp;#34;create_time&amp;#34;: { &amp;#34;order&amp;#34;: &amp;#34;desc&amp;#34; } } ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="52-æ ¸å¿ƒæŸ¥è¯¢åŒºåˆ«match-vs-term"&gt;5.2 æ ¸å¿ƒæŸ¥è¯¢åŒºåˆ«ï¼šMatch vs Term
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;match&lt;/code&gt;&lt;/strong&gt;ï¼šå…¨æ–‡æ£€ç´¢ã€‚ä¼šå°†æœç´¢è¯å…ˆåˆ†è¯ï¼Œå†åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;term&lt;/code&gt;&lt;/strong&gt;ï¼šç²¾ç¡®åŒ¹é…ã€‚ä¸åˆ†è¯ï¼Œæœç´¢è¯å¿…é¡»ä¸ç´¢å¼•ä¸­çš„è¯é¡¹å®Œå…¨ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;âš ï¸ è¸©å‘æç¤º&lt;/strong&gt;ï¼šé»˜è®¤åˆ†è¯ä¸‹ï¼Œä¸­æ–‡ä¼šè¢«æ‹†åˆ†ä¸ºå•ä¸ªæ±‰å­—ã€‚è‹¥ç”¨ &lt;code&gt;term&lt;/code&gt; æœç´¢â€œç§‹å­£â€ï¼Œè€Œç´¢å¼•ä¸­åªæœ‰â€œç§‹â€å’Œâ€œå­£â€ï¼Œåˆ™æ— æ³•åŒ¹é…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="53-filter-è¿‡æ»¤"&gt;5.3 Filter è¿‡æ»¤
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;filter&lt;/code&gt; åŒ…å«åœ¨ &lt;code&gt;bool&lt;/code&gt; æŸ¥è¯¢ä¸­ï¼Œå…¶ç‰¹ç‚¹æ˜¯ä¸è®¡ç®—ç›¸å…³æ€§è¯„åˆ†ï¼Œ&lt;strong&gt;æ€§èƒ½æ›´é«˜ä¸”æ”¯æŒç¼“å­˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;GET /note/_search
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;query&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;bool&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;filter&amp;#34;: { &amp;#34;match&amp;#34;: { &amp;#34;title&amp;#34;: &amp;#34;ç§‹å­£&amp;#34; } }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="54-èšåˆæŸ¥è¯¢-aggregation"&gt;5.4 èšåˆæŸ¥è¯¢ (Aggregation)
&lt;/h3&gt;&lt;p&gt;ç±»ä¼¼äº SQL çš„ &lt;code&gt;GROUP BY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;span class="lnt"&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-http" data-lang="http"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;GET /note/_search
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;aggs&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;group_by_time&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; &amp;#34;terms&amp;#34;: { &amp;#34;field&amp;#34;: &amp;#34;create_time&amp;#34; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="6-åº”ç”¨åœºæ™¯"&gt;6. åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ELK æ—¥å¿—åˆ†æ&lt;/strong&gt;ï¼šLogstash æ”¶é›† ES å­˜å‚¨ Kibana å±•ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚ç›´æœç´¢&lt;/strong&gt;ï¼šç”µå•†å•†å“æœç´¢ã€ç«™å†…æœç´¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶åºæ•°æ®&lt;/strong&gt;ï¼šç›‘æ§æŒ‡æ ‡å­˜å‚¨ä¸å®æ—¶å‘Šè­¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èç³»ç»Ÿ&lt;/strong&gt;ï¼šåŸºäºèšåˆåˆ†æçš„ç”¨æˆ·ç”»åƒåˆ†æã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;</description></item></channel></rss>